---
title: 升級舊的 Unity 專案
description: 瞭解如何將內容更新至最新版本的 Unity。
ms.date: 10/19/2021
ms.topic: article
keywords: 套件、世界、unity、更新、著色器、上載器、疑難排解
ms.openlocfilehash: 06af70164e5bf870a10bf1ee9e949e09dfa69fd2
ms.sourcegitcommit: 8c58f9f9ad1a3f9534141dee2c78e32792d0db7a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/25/2021
ms.locfileid: "130302379"
---
<a name="upgrading-old-unity-projects"></a>升級舊的 Unity 專案
=============================

多年來，AltspaceVR 經歷了數個不頻繁的升級，要求使用者變更其內容。 如果您發現您先前上傳的範本或套件無法在最新版的 AltspaceVR 中存取，請遵循本指南，讓您的內容再次開始運作。

> [!NOTE]
> 遵循本指南中的任何步驟之前，您應該先建立專案的完整備份，以防升級不會順利進行。 最簡單的方式是建立整個專案資料夾的第二份複本。 如需更先進的解決方案，請考慮使用版本控制系統，例如 Git 和 GitHub。

<a name="overview"></a>概觀
---------

在撰寫本文時，AltspaceVR 的目前版本會使用下列設定：

* 遊戲引擎： Unity 2020.3.18 f1 (也可接受： Unity 2020.3.9 f1) 
* Upload工具：上傳2。2
* 轉譯：通用轉譯管線 (URP) 
* 身歷聲模式： Single-Pass 實例 (SPI) ，或進行

如果您的專案 Unity 版本早于2020.3，您可能需要一次取得這些更新，因此請從頭開始使用本指南。 如果您已在 Unity 2020.3 上，但使用上載0.9，請從步驟6開始。

1. **備份您的專案** -建立整個專案目錄的複本，並將它放在安全的地方。 這項升級是破壞性升級，因此在您完成後，將會遺失原始專案檔。
    如果您在這項升級期間遇到任何問題，您需要一份全新的專案，才能回復。

2. **移除舊的上載** 程式-如果您的專案使用 AltspaceVR 上傳程式0.8 或更早版本，請執行此步驟。 在 Unity 關閉的情況下，刪除下列檔案/資料夾，並對應的中繼檔案。 如果檔案/資料夾不存在，則直接略過它。

    * 資產/Altspace
    * 資產/外掛程式
    * 資產/Prefabs/測試-資料夾
    * 資產/Prefabs/Readme.txt
    * 資產/資源/bg. jpeg
    * 資產/資源/bg2 jpeg
    * 資產/資源/logo.png
    * 資產/資源/UserPreferences 資產
    * 資產/DFloor_v004 fbx

3. **移除已處理的資產** -如果您要升級至新的 Unity 版本，請執行此步驟。 在 Unity 關閉的情況下，刪除專案中的程式庫資料夾。 這是 Unity 系統資料夾，其中包含引擎專屬的資產和檔案，這些資產和檔案會自動從 [資產] 資料夾的內容產生， (在) 其他專案。

4. **下載引擎版本** -如果您要升級至新的 Unity 版本，請執行此步驟。 開啟 Unity 中樞，並從下載封存 (連結安裝 Unity 2020.3.18 f1， [以) 安裝引擎的連結](unityhub://2020.3.18f1/a7d1c678663c) 。
    * 如果是在 Windows 電腦上建立，請核取 [Android 和 Mac 組建支援] 方塊。
    * 如果是在 Mac 上建立的，請核取 [Android] 和 [Windows 組建支援] 方塊。

5. **升級專案** -在 Unity 2020.3.18 f1 中開啟已清除的專案，並允許 Unity 升級您的專案。
    這需要一些時間。

6. **下載**[上傳](https://aka.ms/AvrUrpUploader)者-下載最新版的上傳程式，並將它儲存在您專案的 [套件] 資料夾中。 這個檔案的副檔名應為 "tgz"。
    > [!NOTE]
    > 如果您使用 Safari 瀏覽器進行下載，它會自動解壓縮至 Unity 無法使用的 "tar" 檔案。 您可以使用不同的瀏覽器來下載，或使用 "gzip" 系統公用程式來重新壓縮。
    
7. **安裝** 上傳程式-從 Unity 編輯器的套件管理員中安裝上載程式：
    1. 開啟 Unity 封裝管理員視窗： Windows > 封裝管理員
    2. 在視窗左上角，按一下 [+] 圖示，然後選取 [從 tarball 新增套件]。
    3. 選取您在上一個步驟中下載的 tgz 檔案。
    4. 等候 Unity 將套件解壓縮。

8. **開啟上載** 程式-如果安裝成功，則頂端列中會有 [AltspaceVR] 功能表。
    此功能表包含套件和範本的個別視窗。 開啟最適合您專案的一個專案。
    視窗第一次開啟時，會將您的專案設定設定為符合 Altspace 遊戲用戶端：啟用通用轉譯管線，以及 Single-Pass 實例

9. **修正著色** 器-在第一次執行安裝程式時，可能會暫時顯示 powershell 視窗。
    系統可能會提示您升級一些自訂/下載的著色器。 如果您核准提示，powershell 腳本將會嘗試自動升級您的著色器，但成功的機率很低。 您將需要手動檢查著色器是否仍在 URP 中正常運作。

10. **修正素材** -部分/全部材質可能會在升級過程中變成粉紅色/洋紅。 這表示該材質使用的著色器發生錯誤。 如果您使用 Unity 內建著色器，通常可以從功能表自動將這些著色器遷移至 URP 相容的著色器：編輯 > 轉譯管線 > 通用轉譯管線 > 將 Project 材質升級為 UniversalRP 材質。

11. **建立並上傳** -此時，您的專案應該完整升級。 遵循 [開始使用](world-building-toolkit-getting-started.md) 指南中的指示，建立及上傳您的套件/範本。

<a name="troubleshooting-tips"></a>疑難排解秘訣
---------------------

1. 如果您發現您的內容只會以 VR 模式出現在一眼中，則您使用的自訂著色器可能不支援 SPI 轉譯。 您必須選擇不同的著色器，或遵循 [Unity 的 SPI 升級指南](https://docs.unity3d.com/Manual/SinglePassInstancing.html) ，手動編輯著色器並新增支援。

2. 如果您發現您的部分內容是遊戲中的粉紅色/洋紅，或是完全不可見，這可能是因為著色器與 URP 不相容所造成。 您將需要更換著色器，或自行升級。